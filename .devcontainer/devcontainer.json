{
	"name": "Free AWS Cloud Bootcamp Development Environment",
	"build": { "dockerfile": "Dockerfile" },  
  
	"features": {
	  "ghcr.io/devcontainers/features/docker-in-docker:2": {}
	},
  
	// "forwardPorts": [3000, 4567, 2000],
  
	// "portsAttributes": {
	//   "3000": {
	// 	"label": "Cruddur Frontend",
	// 	"onAutoForward": "notify"
	//   },
	//   "4567": {
	// 	"label": "Cruddur Backend",
	// 	"onAutoForward": "notify"
	//   },
	//   "2000": {
	// 	"label": "AWS X-Ray Daemon",
	// 	"onAutoForward": "notify"
	//   },
	//   "4318": {
	// 	"label": "OTEL HTTP Exporter",
	// 	"onAutoForward": "notify"
	//   },
	//   "4000": {
	// 	"label": "NodeJS Sidecar",
	// 	"onAutoForward": "notify"
	//   }
	// },
  
	"customizations": {      
	  "vscode": {        
		"extensions": [
			"42Crunch.vscode-openapi",
			"ms-azuretools.vscode-docker",
			"ms-python.python",                                
			"hashicorp.terraform",
			"redhat.ansible",
			"redhat.vscode-yaml",
			"amazonwebservices.aws-toolkit-vscode"
		]
	  }
	},     
	
	"containerEnv": {
	  "AWS_ACCESS_KEY_ID":      "${AWS_ACCESS_KEY_ID}",
	  "AWS_ACCOUNT_ID":         "${AWS_ACCOUNT_ID}",
	  "AWS_DEFAULT_REGION":     "${AWS_DEFAULT_REGION}",
	  "AWS_SECRET_ACCESS_KEY":  "${AWS_SECRET_ACCESS_KEY}",
	  "DOCKER_USERNAME":        "${DOCKER_USERNAME}",
	  "DOCKER_PASSWORD":        "${DOCKER_PASSWORD}",
	  "HONEYCOMB_API_KEY":      "${HONEYCOMB_API_KEY}",
	  "ROLLBAR_ACCESS_TOKEN":   "${ROLLBAR_ACCESS_TOKEN}",
	  "CONNECTION_URL":         "${CONNECTION_URL}",    
	  "PROD_CONNECTION_URL":    "${PROD_CONNECTION_URL}",
	  "DB_SG_ID":               "${DB_SG_ID}",
	  "DB_SG_RULE_ID":          "${DB_SG_RULE_ID}"
	},
	
	"remoteUser": "bootcamp",
  
	"postAttachCommand": {
	  "npm-prep": "cd /workspaces/aws-bootcamp-cruddur-2023/frontend-react-js && npm install && cd /workspaces/aws-bootcamp-cruddur-2023/jwt-node-sidecar && npm install",
	  "pip-prep": "cd /workspaces/aws-bootcamp-cruddur-2023/backend-flask && pip install -r requirements.txt",
	  "ip-update": "export GITPOD_IP=$(curl -s ifconfig.me) && /workspaces/aws-bootcamp-cruddur-2023/backend-flask/bin/rds/update-sg-rule"
	}
  }