#! /usr/bin/bash

ABS_PATH=$(readlink -f "$0")
BACKEND_PATH=$(dirname $ABS_PATH)
BIN_PATH=$(dirname $BACKEND_PATH)
PROJECT_PATH=$(dirname $BIN_PATH)
ENVFILE_PATH="$PROJECT_PATH/backend-flask.env"

docker run --rm \
  --env-file $ENVFILE_PATH \
  --network  cruddur-net \
  --publish 4567:4567 \
  -it backend-flask-prod

# docker run --rm \
#   --env PYTHONUNBUFFERED=1 \
#   --env CONNECTION_URL="postgresql://postgres:password@db:5432/cruddur" \
#   --env AWS_ENDPOINT_URL="http://dynamodb-local:8000" \
#   --env FRONTEND_URL="https://3000-timmycde-awsbootcampcru-7c6v53v1sdk.ws-us93.gitpod.io" \
#   --env BACKEND_URL="https://4567-timmycde-awsbootcampcru-7c6v53v1sdk.ws-us93.gitpod.io" \
#   --env OTEL_EXPORTER_OTLP_ENDPOINT="https://api.honeycomb.io" \
#   --env OTEL_EXPORTER_OTLP_HEADERS="x-honeycomb-team=AddVfemzHjCpCGh6e6ibKK" \
#   --env OTEL_SERVICE_NAME="backend-flask" \
#   --env AWS_XRAY_URL="*4567-timmycde-awsbootcampcru-7c6v53v1sdk.ws-us93.gitpod.io*" \
#   --env AWS_XRAY_DAEMON_ADDRESS="xray-daemon:2000" \
#   --env AWS_DEFAULT_REGION="us-east-1" \
#   --env AWS_ACCESS_KEY_ID="***REMOVED***" \
#   --env AWS_SECRET_ACCESS_KEY="***REMOVED***" \
#   --env ROLLBAR_ACCESS_TOKEN="a5830a1ded594f8f83622a6a163caf64" \
#   --env AWS_COGNITO_USER_POOL_ID="us-east-1_bnfXCOI56" \
#   --env AWS_COGNITO_USER_POOL_CLIENT_ID='7gojn9iqpjabsdsq7q18a5i24l' \
#   --network  cruddur-net \
#   --publish 4567:4567 \
#   -it backend-flask-prod